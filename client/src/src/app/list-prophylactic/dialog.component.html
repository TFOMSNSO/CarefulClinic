<!--TODO: �������� ����������� ������ ���� ������ (���������� ��� ����� ���� ���������������) -->
<mat-toolbar color="primary">
  <div style="align-self: flex-end; padding-top:10px;">{{data.personSurname}} {{data.personKindfirstname}} {{data.personKindlastname}}</div>
  <span style="align-self: flex-end; font-size: 12px;">{{_year_disp}}
			<mat-form-field style="width: 70px;">
			  <mat-select [(value)]=selected (change)="filterChanged($event)" [disabled]=disableSelect>
        <mat-option value="2019">2019</mat-option>
				<mat-option value="2018">2018</mat-option>
				<mat-option value="2017">2017</mat-option>
				<mat-option value="2016">2016</mat-option>
			  </mat-select>
			</mat-form-field>
		</span>
  <span style="flex-grow: 1; font-size: 25px;">{{title}}</span>
  <mat-dialog-actions style="flex-grow: 0;">
    <button mat-raised-button color="accent" mat-dialog-close="Option 1">{{ close_card}}</button>
  </mat-dialog-actions>

</mat-toolbar>

<mat-tab-group color="primary" (selectChange)="check($event)">

  <mat-tab id="tab1" label="{{tab1}}">

    <mat-card>
      <mat-card-content>
        <table cellspacing="0">
          <tr>
            <td>
              <mat-list-item>
                <!-- <img mat-list-avatar src="app/list-prophylactic/icon/ic_account_box_black_48dp_1x.png" alt="Desc 1"> -->
                <mat-input-container>
                  <input matInput placeholder="{{surname}}" value="{{data.personSurname}}">
                </mat-input-container>
              </mat-list-item>
            </td>
            <td>
              <mat-list-item>
                <mat-input-container>
                  <input matInput value="{{data.personKindfirstname}}" placeholder="{{firstname}}">
                </mat-input-container>
              </mat-list-item>
            </td>
            <td>
              <mat-list-item>
                <mat-input-container>
                  <input matInput value="{{data.personKindlastname}}" placeholder="{{lastname}}">
                </mat-input-container>
              </mat-list-item>
            </td>
          </tr>
          <tr>
            <td>
              <mat-list-item>
                <mat-input-container>
                  <input matInput value="{{data.years}}" placeholder="{{t_years}}">
                </mat-input-container>
              </mat-list-item>
            </td>
            <td>
              <mat-list-item>
                <mat-input-container>
                  <input matInput value="{{data.personBirthday}}" placeholder="{{bithday}}">
                </mat-input-container>
              </mat-list-item>
            </td>
          </tr>
          <tr *ngIf="data.personadd">
            <td  *ngIf="data.personadd.tele2">
              <mat-list-item>
                <mat-input-container>
                  <input matInput value="{{data.personadd.tele2}}" placeholder="{{telefon}}">
                </mat-input-container>
              </mat-list-item>
            </td>
            <td  *ngIf="data.personadd.teledom">
              <mat-list-item>
                <mat-input-container>
                  <input matInput value="{{data.personadd.teledom}}" placeholder="{{telefon}}">
                </mat-input-container>
              </mat-list-item>
            </td>
            <td  *ngIf="data.personadd.telework">
              <mat-list-item>
                <mat-input-container>
                  <input matInput value="{{data.personadd.telework}}" placeholder="{{telefon}}">
                </mat-input-container>
              </mat-list-item>
            </td>
          </tr>
          <tr>
            <td>
              <mat-list-item>
                <mat-input-container>
                  <input matInput value="{{data.personLinksmoestablishmentid === 1 ?  _linksmo_1  : data.personLinksmoestablishmentid  === 2 ?  _linksmo_2  : data.personLinksmoestablishmentid  === 4 ?  _linksmo_4  : _otkreplen}}" placeholder="{{linksmo}}">
                </mat-input-container>
              </mat-list-item>
            </td>
          </tr>
          <tr>
            <td>
              <mat-list-item>
                <mat-input-container>
                  <input matInput value="540{{data.personEstablishmentambul}}" placeholder="{{PM_HOSPITAL_RESULT}}">
                </mat-input-container>
              </mat-list-item>
            </td>
          </tr>
        </table>
      </mat-card-content>
    </mat-card>


  </mat-tab>
  <mat-tab  label="{{tab2}}"><div [@toggle]="show" style="overflow: hidden;"
                                  (@toggle.start)="animationStarted($event)"
                                  (@toggle.done)="animationDone($event)"
                                  *ngIf="show" ><mat-spinner style="margin:auto; margin-top:50px;"></mat-spinner></div>

    <div [@toggle]="!show" *ngIf="!show">
      <table cellspacing="0">
        <tr>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput placeholder="{{start_date_etap1}}" value="{{data_ger.start_date_etap1}}">
              </mat-input-container>
            </mat-list-item>
          </td>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data_ger.end_date_etap1}}" placeholder="{{end_date_etap1}}">
              </mat-input-container>
            </mat-list-item>
          </td>
        </tr>
        <tr>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data_ger.start_date_etap2}}" placeholder="{{start_date_etap2}}">
              </mat-input-container>
            </mat-list-item>
          </td>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data_ger.end_date_etap2}}" placeholder="{{end_date_etap2}}">
              </mat-input-container>
            </mat-list-item>
          </td>
        </tr>
        <tr>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data_ger.ref_id_person}}" placeholder="{{ref_id_person}}">
              </mat-input-container>
            </mat-list-item>
          </td>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data_ger.pm_god}}" placeholder="{{pm_god}}">
              </mat-input-container>
            </mat-list-item>
          </td>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data_ger.pm_kvartal}}" placeholder="{{pm_kvartal}}">
              </mat-input-container>
            </mat-list-item>
          </td>
        </tr>
        <tr>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data_ger.tel}}" placeholder="{{tel}}">
              </mat-input-container>
            </mat-list-item>
          </td>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data_ger.pm_result}}" placeholder="{{pm_result}}">
              </mat-input-container>
            </mat-list-item>
          </td>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data_ger.pm_HOSPITAL_RESULT}}" placeholder="{{PM_HOSPITAL_RESULT}}">
              </mat-input-container>
            </mat-list-item>
          </td>
        </tr>
      </table>

      <mat-list-item class="full-width">

        <textarea  placeholder="{{adress}}">{{data_ger.adress}}</textarea>

      </mat-list-item>
    </div>
  </mat-tab>
  <mat-tab  label="{{tab3}}">
    <div *ngIf="data_informir.length > 0; else other_content" >
      <table>
        <tr>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput placeholder="{{surname}}" value="{{data_informir[0].fam}}">
              </mat-input-container>
            </mat-list-item>
          </td>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data_informir[0].im}}" placeholder="{{firstname}}">
              </mat-input-container>
            </mat-list-item>
          </td>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data_informir[0].ot}}" placeholder="{{lastname}}">
              </mat-input-container>
            </mat-list-item>
          </td>
        </tr>
      </table>
      <table cellspacing="0" *ngFor="let data of data_informir">
        <tr>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data.nStage}}" placeholder="{{nstage}}">
              </mat-input-container>
            </mat-list-item>
          </td>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data.tInfo}}" placeholder="{{tinfo}}">
              </mat-input-container>
            </mat-list-item>
          </td>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data.dInfo}}" placeholder="{{dinfo}}">
              </mat-input-container>
            </mat-list-item>
          </td>
        </tr>
      </table>
    </div>
    <ng-template #other_content>
      <div *ngIf="flag_informed; else date_note"><h1><mat-spinner style="margin:auto; margin-top:50px;"></mat-spinner></h1></div>
      <ng-template #date_note><mat-error><h3>{{data_not_found}}</h3></mat-error></ng-template>
    </ng-template>
  </mat-tab>
  <mat-tab  label="{{_survey}}">
    <div *ngIf="data_survey.length > 0; else other_content_survey" >
      <!--TODO вывести СМО наверх отдельной табличкой-->
      <!-- {{data_survey | json}} -->
      <!--<table style="margin-top: 14px;">-->
      <!--<table cellspacing="0" *ngFor="let data of data_survey">
        <tr>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data[6] == 2 ? _linksmo_2 : data[6] == 1 ? _linksmo_1 : data[6] == 4 ? _linksmo_4 : ''  }}" placeholder="СМО">
              </mat-input-container>
            </mat-list-item>
          </td>
&lt;!&ndash;          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data_survey[0][1]}}" placeholder="{{firstname}}">
              </mat-input-container>
            </mat-list-item>
          </td>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data_survey[0][2]}}" placeholder="{{lastname}}">
              </mat-input-container>
            </mat-list-item>
          </td>&ndash;&gt;
        </tr>
      </table>-->
      <!--<table style="margin-top: 20px;">-->
      <table cellspacing="0" *ngFor="let data of data_survey">
        <!--<tr>
          &lt;!&ndash;<td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data[6] == 2 ? _linksmo_2 : data[6] == 1 ? _linksmo_1 : data[6] == 4 ? _linksmo_4 : data[6]}}" placeholder="СМО">
              </mat-input-container>
            </mat-list-item>
          </td>&ndash;&gt;


        </tr>-->
        <tr>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data[6] == 2 ? _linksmo_2 : data[6] == 1 ? _linksmo_1 : data[6] == 4 ? _linksmo_4 : ''  }}" placeholder="СМО">
              </mat-input-container>
            </mat-list-item>
          </td>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data[3] | date: 'dd.MM.yyyy' }}" placeholder="{{_statsurvey_date}}">
              </mat-input-container>
            </mat-list-item>
          </td>
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data[4] == 1 ? _statsurvey1 : data[4] == 2 ? _statsurvey2 : data[4] == 3 ? _statsurvey3 : data[4] == 4 ? _statsurvey4 : data[4] == 5 ? _statsurvey5 : data[4] == 6 ? _statsurvey6 : data[4] == 7 ? _statsurvey7 : data[4] == 8 ? _statsurvey8 : data[4] == 9 ? _statsurvey9 : data[4] == 10 ? _statsurvey10 : data[4] == 11 ? _statsurvey11 : data[4] == 12 ? _statsurvey12 : data[4] == 13 ? _statsurvey13 : data[4] == 14 ? _statsurvey14 : data[4] == 15 ? _statsurvey15 : data[4] == 16 ? _statsurvey16 : data[4] == 17 ? _statsurvey17 : data[4] == 18 ? _statsurvey18 : data[4] == 19 ? _statsurvey19 : data[4] == 101 ? _statsurvey101 : data[4] == 102 ? _statsurvey102 : data[4] == 103 ? _statsurvey103 : data[4] == 104 ? _statsurvey104 : data[4] == 105 ? _statsurvey105 : data[4] == 106 ? _statsurvey106 : data[4] == 107 ? _statsurvey107 : data[4] == 108 ? _statsurvey108 : data[4] == 109 ? _statsurvey109 : data[4] == 110 ? _statsurvey110 : data[4] == 111 ? _statsurvey111 : data[4] == 20 ? _statsurvey20 : ''  }}" placeholder="{{_statsurvey_result}}">
              </mat-input-container>
            </mat-list-item>
          </td>

          <!--<td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data[7] == 10 ? _resstat : '' }}">
              </mat-input-container>
            </mat-list-item>
          </td>-->
          <td>
            <mat-list-item>
              <mat-input-container>
                <input matInput value="{{data[8] == 1 ? _error1 : data[8] == 2 ? _error2 : data[8] == 3 ? _error3 : data[8] == 4 ? _error4 : data[8] == 5 ? _error5 : data[8] == 6 ? _error6 : data[8] == 7 ? _error7 : data[8] == 8 ? _error8 : data[8] == 9 ? _error9 : data[8] == 10 ? _error10 : data[8] == 11 ? _error11 : data[8] == 12 ? _error12 : ''  }}" placeholder="{{data[7] == 10 ? _resstat : '' }}">
              </mat-input-container>
            </mat-list-item>
          </td>
        </tr>
        <tr>
          <td colspan="4">
            <textarea rows="1" cols="45">{{data[5]}}</textarea>
          </td>
        </tr>
      </table>
    </div>
    <ng-template #other_content_survey>
      <div *ngIf="flag_survey; else date_not_found;"><h1><mat-spinner style="margin:auto; margin-top:50px;"></mat-spinner></h1></div>
      <ng-template #date_not_found>
        <mat-error><h3>{{data_not_found}}</h3></mat-error>
        <mat-card>
          <form [formGroup]="myFormsurvey" novalidate (ngSubmit)="add_survey(myFormsurvey);">
            <mat-card-content>
              <mat-input-container style="width: 70%; font-size: 25px;">
                <input matInput placeholder="{{_titlesurvey}}" value="{{_maintitlesurvey}}" disabled>
              </mat-input-container><br/>
              <mat-select  style="width: 40%;"  class='full-width required' placeholder="{{_statsurvey_result}}"  formControlName="result_survey">
                <mat-option *ngFor="let data of resultsurvey" [value]="data.id">{{ data.name }}</mat-option>
              </mat-select><br>.
              <br/>
              <my-date-picker  [placeholder]="_statsurvey_date"  name="datesur" [options]="myDatePickerOptions" formControlName="datesur"></my-date-picker>
              <span *ngIf="!myFormsurvey.controls.datesur.valid" class="help-block text-danger">
	   				 	<mat-error>{{field_is_required}}</mat-error>
	   				 </span>
              <textarea rows="10" cols="45"  formControlName="prim"></textarea>
            </mat-card-content>
            <mat-card-actions id='lastblocksearch'>
              <button type='submit' mat-raised-button color='primary'[disabled]="!myFormsurvey.valid">Ok</button>
              <button type='button' mat-raised-button color='primary' (click)="resetForm()">reset</button>
            </mat-card-actions>
          </form>
        </mat-card>
        <br>
        {{myFormsurvey.value | json}}



      </ng-template>
    </ng-template>
  </mat-tab>
</mat-tab-group>



<!-- <div style="margin-left: 20px;" mat-dialog-actions> -->

<!-- </div> -->
